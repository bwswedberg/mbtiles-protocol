!function(){var e,t,r={2992:function(e,t,r){"use strict";var n=r(9062),a=r(5861),i=r(7757),o=r.n(i),c=r(6657),u=r.n(c),s=r(6768),f=r(3144),l=r(5671),p=r(4942),d=r(6269),h="metadata",v="tile",b=(0,f.Z)((function e(t){(0,l.Z)(this,e),(0,p.Z)(this,"type","registerTileset/progress"),this.payload=t})),g=(0,f.Z)((function e(t){(0,l.Z)(this,e),(0,p.Z)(this,"type","registerTileset/fulfilled"),this.payload=t})),w=(0,f.Z)((function e(t){(0,l.Z)(this,e),(0,p.Z)(this,"type","registerTileset/rejected"),this.payload=t})),x=function(){var e=(0,a.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.X3("tilesets",1,{upgrade:function(e){e.createObjectStore(h,{keyPath:"id"}),e.createObjectStore(v,{keyPath:"id"})}});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,a.Z)(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u()({locateFile:function(){return s}});case 2:return r=e.sent,e.next=5,fetch(t).then((function(e){return e.arrayBuffer()}));case 5:return n=e.sent,e.abrupt("return",new r.Database(new Uint8Array(n)));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,a.Z)(o().mark((function e(t,r){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(h,r);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),k=function(){var e=(0,a.Z)(o().mark((function e(t,r){var a,i,c,u,s,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.put(h,{id:r,date:(new Date).toISOString()});case 2:return e.next=4,t.getAllKeys(h);case 4:return a=e.sent,i=t.transaction(v,"readwrite"),e.next=8,i.store.getAllKeys();case 8:return c=e.sent,u=a.filter((function(e){return e!==r})),s=new RegExp("^(".concat(u.join("|"),")/")),f=c.filter((function(e){return!s.test(e)})),e.next=14,Promise.all([].concat((0,n.Z)(f.map((function(e){return i.store.delete(e)}))),[i.done]));case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),O=function(e,t,r,n){var a=e.exec("SELECT zoom_level, tile_column, tile_row, tile_data FROM tiles ORDER BY zoom_level, tile_column, tile_row LIMIT $limit OFFSET $offset",{$limit:n,$offset:r}),i=a&&a[0]&&a[0].values;if(i)return i.map((function(e){return{id:"".concat(t,"/").concat(e[0],"/").concat(e[1],"/").concat(e[2],".pbf"),data:e[3]}}))},Z=function(){var e=(0,a.Z)(o().mark((function e(t,r,a){var i,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0,c=o().mark((function e(){var c,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=O(a,r,i,5e3)){e.next=3;break}return e.abrupt("return","break");case 3:return u=t.transaction(v,"readwrite"),e.next=6,Promise.all([].concat((0,n.Z)(c.map((function(e){return u.store.add(e)}))),[u.done]));case 6:i+=5e3;case 7:case"end":return e.stop()}}),e)}));case 2:return e.delegateYield(c(),"t0",4);case 4:if("break"!==e.t0){e.next=7;break}return e.abrupt("break",9);case 7:e.next=2;break;case 9:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),_=function(e,t){self.postMessage(new b({tilesetId:e,message:t,date:(new Date).toISOString()}))},P=function(){var e=(0,a.Z)(o().mark((function e(t){var r,n,a,i,c,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.payload,n=r.url,a=r.tilesetId,_(a,"start"),e.next=5,x();case 5:return i=e.sent,e.next=8,y(i,a);case 8:if(!e.sent){e.next=12;break}return self.postMessage(new g({tilesetId:t.payload.tilesetId})),e.abrupt("return");case 12:return _(a,"initMbtiles:begin"),e.next=15,m(n);case 15:return c=e.sent,_(a,"initMbtiles:end"),_(a,"tilesetPut:begin"),e.next=20,k(i,a);case 20:return _(a,"tilesetPut:end"),_(a,"tilesPut:begin"),e.next=24,Z(i,a,c);case 24:_(a,"tilesPut:end"),self.postMessage(new g({tilesetId:t.payload.tilesetId})),e.next=32;break;case 28:e.prev=28,e.t0=e.catch(0),u="string"==typeof e.t0?e.t0:e.t0 instanceof Error?"".concat(e.t0.name,": ").concat(e.t0.message):"Failed to register tileset",self.postMessage(new w({error:u}));case 32:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(t){return e.apply(this,arguments)}}();self.onmessage=function(e){if("registerTileset"===e.data.type)return P(e.data);throw new Error("Unhandled event type")}},7607:function(){},803:function(){},9547:function(){}},n={};function a(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return r[e](i,i.exports,a),i.loaded=!0,i.exports}a.m=r,a.x=function(){var e=a.O(void 0,[594],(function(){return a(2992)}));return a.O(e)},e=[],a.O=function(t,r,n,i){if(!r){var o=1/0;for(f=0;f<e.length;f++){r=e[f][0],n=e[f][1],i=e[f][2];for(var c=!0,u=0;u<r.length;u++)(!1&i||o>=i)&&Object.keys(a.O).every((function(e){return a.O[e](r[u])}))?r.splice(u--,1):(c=!1,i<o&&(o=i));if(c){e.splice(f--,1);var s=n();void 0!==s&&(t=s)}}return t}i=i||0;for(var f=e.length;f>0&&e[f-1][2]>i;f--)e[f]=e[f-1];e[f]=[r,n,i]},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,r){return a.f[r](e,t),t}),[]))},a.u=function(e){return e+"-"+a.h()+".js"},a.h=function(){return"b8f45d4844b46b164e42"},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e}(),function(){var e={407:1};a.f.i=function(t,r){e[t]||importScripts(a.p+a.u(t))};var t=self.webpackChunkvector_tile_protocols=self.webpackChunkvector_tile_protocols||[],r=t.push.bind(t);t.push=function(t){var n=t[0],i=t[1],o=t[2];for(var c in i)a.o(i,c)&&(a.m[c]=i[c]);for(o&&o(a);n.length;)e[n.pop()]=1;r(t)}}(),t=a.x,a.x=function(){return a.e(594).then(t)},a.x()}();